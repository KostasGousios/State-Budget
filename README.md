# Gov-Budget

## Οδηγίες Μεταγλώττισης του Προγράμματος:

Η εργασία μας, όπως μασ ζητήθηκε, είναι γραμμένη σε γλώσσα προγραμματισμού java και χρησιμοποιεί το εργαλείο Apache Maven, με σκοπό τη διαχείριση των εξαρτήσεων, τη μεταγλώττιση του πηγαίου κώδικα και τη δημιουργία του εκτελέσιμου αρχείου. Για τη χρήση του Maven είναι προαπαιτούμενα τα παρακάτω:

- Java Development Kit (JDK) έκδοσης 8 ή νεότερης  
  (έλεγχος εγκατάστασης: `java -version`)
- Apache Maven  
  (έλεγχος εγκατάστασης: `mvn -version`)
- Σύνδεση στο διαδίκτυο για τη λήψη των εξαρτήσεων

Από τη στιγμή που τα παραπάνω έχουν εξασφαλισθεί, περνάμε στη διαδικασία της μεταγλώττισης. Πιο συγκεκριμένα:

- Κλωνοποιούμε το αποθετήριό μας
- Μεταβαίνουμε στον φάκελο του έργου μας
- Εκτελούμε την εντολή:  
  ```bash
  mvn clean package
Η εντολή αυτή:
- Κατεβάζει αυτόματα όλες τις απαιτούμενες εξαρτήσεις
- Εκτελεί στατικό έλεγχο κώδικα (Checkstyle)
- Εκτελεί μονάδες ελέγχου (JUnit)
- Δημιουργεί το τελικό αρχείο build στον φάκελο target/
Μετά την επιτυχή ολοκλήρωση της διαδικασίας, τα παραγώμενα αρχεία μεταγλώττισης βρίσκονται στον φάκελο target/.

## Οδηγίες εκτέλεσης κώδικα Java για αρχείο README.md:
Προαπαιτούμενα:
- Εγκατεστημένο Java Development Kit (JDK) (έκδοση 21), απαραίτητο για την εκτέλεση αρχείων .java και .class
- Apache Maven: εγκατεστημένο στο σύστημα σας
- Καθώς επίσης πρέπει να έχει εγκατασταθεί ο φάκελος του project μας στον υπολογιστή σας
Βήματα εκτέλεσης:
Ανοίγετε οποιοδήποτε τερματικό στον κεντρικό φάκελο του project και εκτελείτε:
- mvn clean compile, για μεταγλώττιση του κώδικα και μετατροπή όλων των αρχείων .java σε .class
- mvn exec:java -Dexec.mainClass="Main", για να ξεκινήσει το πρόγραμμα καλώντας την μέθοδο main της κλάσης Main
## Οδηγίες χρήσης για τον κώδικα Java:
Λογική του προγράμματος:
 Σας προτείνουμε να ακολουθήσετε τη σωστή ροή του προγράμματος μας όπως την περιγράφουμε παρακάτω, αλλά και τη λανθασμένη για να δείτε την αντίδραση του προγράμματος.
Αρχικά το πρόγραμμα εμφανίζει ένα μενού επιλογών στο οποίο ο χρήστης έχει τέσσερις επιλογές (1. Πρωθυπουργός, 2. Υπουργείο Παιδείας, 3. Υπουργείο Υγείας και την επιλογή έξοδος (επιλογή 0) η οποία τερματίζει το πρόγραμμα).

Ανάλογα την επιλογή του χρήστη το πρόγραμμα εμφανίζει επιπλέον μενού τα οποία περιγράφουν τις δυνατότητες που έχει ο χρήστης.

Παρακάτω είναι η περιγραφή της λειτουργίας του προγράμματος με τη λογική σειρά που πρέπει να γίνουν οι λειτουργίες που παρέχει.

Αρχικά ο πρωθυπουργός έχει την επιλογή (επιλογή 1) να δημιουργήσει έναν υποθετικό κρατικό προϋπολογισμό εισάγοντας πόσα ώστε να γίνει η καταγραφή των προβλεπόμενων εξόδων/εσόδων για το τρέχον έτος.

Στην συνέχεια είναι απαραίτητο τα Υπουργεία να πατήσουν την επιλογή 1 που θα τους εμφανιστεί, σύμφωνα με την οποία τα υπουργεία βασιζόμενα στα δικά τους προβλεπόμενα έξοδα για το τρέχον έτος ‘ζητάνε’ από τον πρωθυπουργό το ποσό που χρειάζονται.

Έπειτα, είναι σειρά του πρωθυπουργού να μπει στην εφαρμογή και πατώντας την επιλογή 2 στο μενού του, έχει τη δυνατότητα δει τα ζητούμενα ποσά των υπουργείων. Σύμφωνα με τα δεδομένα που διαθέτει, μοιράζει τα χρήματά του σε αυτά. Το πρόγραμμα συγκεκριμένα καλεί τη μέθοδο που διαχειρίζεται αυτό το μοίρασμα (katanomiProypApoProthypoyrgo()).

Σε περίπτωση που τα υπουργεία δεν έχουν εισάγει εκ των προτέρων τον προϋπολογισμό τους, εμφανίζεται κατάλληλο μήνυμα σφάλματος και ο χρήστης παραπέμπεται στο κεντρικό μενού επιλογών αναγκασμένος να περιμένει τα υπουργεία να ζητήσουν κάποιο ποσό.

Τώρα, αφού έχουν πραγματοποιηθεί οι προηγούμενες λειτουργίες, τα υπουργεία πατώντας την επιλογή 2 στο μενού τους μπορούν να δουν το ποσό που τους έδωσε τελικά ο πρωθυπουργός και με κλήση κατάλληλων μεθόδων (eisagwgiPosostwn(), orismosLogariasmwn()) μοιράζουν το ποσό αυτό ποσοστιαία σε κάθε λογαριασμό που έχουν ορίσει (πχ. Key: Πρωτοβάθμια Εκπαίδευση).

Στο σημείο αυτό, τα υπουργεία έχουν εξαντλήσει τις επιλογές τους και ο πρωθυπουργός έχει ακόμη 4 επιλογές οι οποίες είναι:

- 3η επιλογή: Έχει τη δυνατότητα να εισάγει τα πραγματικά έσοδα/έξοδα που έχουν γίνει έως σήμερα και ενημερώνεται με κατάλληλα μηνύματα αν ακολουθείται ο αρχικός προϋπολογισμός (επιλογή 1: υποθετικός προϋπολογισμός)
- 4η επιλογή: Βλέπει τα τελικά ποσά που πραγματοποιήθηκαν μέσα στη χρονιά και τα συγκρίνει με τα προβλεπόμενα. Μπορεί να δει εάν ο προϋπολογισμός είναι ελλειμματικός, ισοσκελισμένος ή πλεονασματικός.
- 5η επιλογή: Είναι ένα ειδικό σενάριο πανδημίας. Μπορεί να το ενεργοποιήσει αν μέσα στη χρονιά κάποια στιγμή εξαπλωθεί μια πανδημία. Συγκεκριμένα, όταν ενεργοποιηθεί, το 50% του ποσού που μέχρι στιγμής δεν έχει ξοδέψει το υπουργείο παιδείας μεταφέρεται αυτόματα στο υπουργείο υγείας για να διαχειριστεί τη κρίση.
- 6η επιλογή: Είναι ένα ειδικό σενάριο φυσικής καταστροφής. Σε αυτή τη περίπτωση παίρνουμε ένα ποσό από τα αποθεματικά του κρατικού ταμείου και μετά απλά τα θεωρούμε ως επιπλέον έξοδα/δαπάνες για τη καταστροφή που υπέστη η χώρα.

## Έξτρα πληροφορίες

Η ροή του προγράμματος που περιγράψαμε παραπάνω εξασφαλίζεται με τη χρήση exceptions καθώς και ειδικών μεθόδων (readSafeInt(), readSafeDouble()). Σε περίπτωση λάθους, δηλαδή σε περίπτωση που η ροή του προγράμματος παραβιαστεί από τον χρήστη, εμφανίζεται μήνυμα σφάλματος και ο χρήστης επιστρέφει στο αρχικό μενού.


## Παρουσίαση Δομής Αποθετηρίου:

Το αποθετήριο της εργασίας Gov-Budget είναι οργανωμένο σύμφωνα με τη συνηθισμένη δομή ενός έργου Java που χρησιμοποιεί Maven. Οι βασικοί φάκελοι και αρχεία του αποθετηρίου είναι οι εξής:
Gov-Budget/
├── src/
│   ├── main/
│   │   ├── java/        (πηγαίος κώδικας της εφαρμογής)
│   │   └── resources/  (αρχεία ρυθμίσεων και SQL)
│   └── test/
│       └── java/       (μονάδες ελέγχου JUnit)
├── webapp/             (αρχεία της web εφαρμογής – JSP, HTML κ.λπ.)
├── pom.xml             (ρυθμίσεις Maven και εξαρτήσεις)
└── README.md           (τεχνική τεκμηρίωση της εργασίας)
Η συγκεκριμένη δομή βοηθά στο να είναι ο κώδικας πιο καθαρός και ευανάγνωστος, ενώ παράλληλα διευκολύνει τη συντήρηση και την περαιτέρω ανάπτυξη της εργασίας.


## UML Διάγραμμα Σχεδιασμού:

Για τη σχεδίαση της εργασίας έχει δημιουργηθεί UML διάγραμμα, το οποίο παρουσιάζει τις βασικές κλάσεις της εφαρμογής και τις σχέσεις μεταξύ τους. Το διάγραμμα αυτό χρησιμοποιήθηκε ως οδηγός κατά την υλοποίηση και βοήθησε στον σωστό αντικειμενοστραφή σχεδιασμό της εφαρμογής.
Μέσα από το UML διάγραμμα γίνεται πιο εύκολα κατανοητή η δομή του συστήματος και ο τρόπος με τον οποίο συνεργάζονται τα επιμέρους τμήματα της εργασίας.


## Βάση Δεδομένων (SQLite):

Η εφαρμογή χρησιμοποιεί βάση δεδομένων SQLite για την αποθήκευση των δεδομένων της.
- Το σχήμα της βάσης, το οποίο μοντελοποιεί τα υπουργεία, τους λογαριασμούς τους και τα οικονομικά δεδομένα (πραγματικά και προβλεπόμενα, καθώς και τους χρήστες της εφαρμογής (πρωθυπουργός, υπουργείο υγείας, υπουργείο παιδείας), ορίζεται σε αρχείο .SQL στον φάκελο resources
- Η κλάση Database.java:
    1. Δημιουργεί το αρχείο της βάσης δεδομένων (statebudget.db)
    2. Ενεργοποιεί τα foreign keys
    3. Δημιουργεί όλους τους απαραίτητους πίνακες αν δεν υπάρχουν
    4. Πραγματοποιεί βασική αρχικοποίηση δεδομένων
- Η κλάση TestDatabase.java χρησιμοποιείται για έλεγχο της σύνδεσης και της σωστής δημιουργίας της βάσης.
Η χρήση της SQLite έγινε διότι επιτρέπει την εκτέλεση της εφαρμογής χωρίς εξωτερικό database server.


## Οδηγίες χρήσης του webapp:

Για να μπορέσει να τρέξει η ιστοσελίδα της εφαρμογής μας, είτε τοπικά στον υπολογιστή σας, είτε μέσω κάποιου σέρβερ, πρέπει να ακολουθήσετε τα εξής βήματα:
- Στην περίπτωση που θέλετε να τρέξετε τα αρχεία τοπικά, θα χρειαστεί να κατεβάσετε στον υπολογιστή που θέλετε να τρέξετε τα αρχεία την τελευταία έκδοση του Tomcat. Αφού τον κατεβάσετε και κάνετε τις απαραίτητες διαδικασίες ώστε να μπορεί να λειτουργήσει, θα δημιουργήσετε έναν φάκελο με όνομα StateBudget μέσα στον ήδη υπάρχον φάκελο webapps του Tomcat (σε περίπτωση που θα ανεβάσετε τα αρχεία σε κάποιον σέρβερ, το βήμα αυτό μπορεί να παραληφθεί, τότε απλώς δημιουργήστε έναν φάκελο με όνομα StateBudget στο μέρος του σέρβερ όπου θέλετε να είναι η εφαρμογή).
- Αφού έχει δημιουργηθεί ο φάκελος StateBudget αντιγράψτε το περιεχόμενο του φακέλου webapp που βρίσκεται μέσα στο αποθετήριο μας στο GitHub.
- Αν τρέχετε τα αρχεία τοπικά θα πρέπει να κάνετε restart τον Tomcat μέσω command palette πληκτρολογώντας τις παρακάτω 3 γραμμές:
1. cd C:\apache-tomcat-9.0xx\bin
2. shutdown.bat
3. startup.bat
- Μόλις γίνει αυτό, πηγαίντε στον browser της επιλογής και δημιουργήστε τον σύνδεσμο της σελίδας (πχ LocalHost:8080/StateBudget/…).
## Σημείωση: η αρχική σελίδα μας βρίσκεται στο αρχείο με όνομα HomePage.jsp. Δηλαδή ο σύνδεσμος πρέπει να τελειώνει σε: …/StateBudget/HomePage.jsp
- Όταν τρέξετε τον σύνδεσμο αυτό θα μπορείτε να δείτε την εφαρμογή μας για τον υπολογισμό του κρατικού προϋπολογισμού, καθώς και να περιηγηθείτε στις φόρμες που έχουν σχηματιστεί για τον πρωθυπουργό, τον υπουργό υγείας και τον υπουργό παιδείας. Επιπλέον, μπορείτε να δείτε μέσω ενός διαγράμματος τα ποσά των εσόδων και των εξόδων που απαρτίζουν τον κρατικό προϋπολογισμό, και να τα συγκρίνετε μεταξύ τους.


## Πρόσθετη Τεχνική Τεκμηρίωση:

1. Περιβάλλον Ανάπτυξης:
Η εργασία Gov-Budget έχει υλοποιηθεί στη γλώσσα προγραμματισμού Java (έκδοση 21).
Η έκδοση της Java ορίζεται στο αρχείο pom.xml μέσω των παραμέτρων maven.compiler.source και maven.compiler.target.
Για τη μεταγλώττιση και εκτέλεση της εργασίας απαιτείται εγκατεστημένο Java Development Kit (JDK) 21.
2. Διαχείριση Εξαρτήσεων
Η διαχείριση των εξαρτήσεων και της διαδικασίας build της εργασίας πραγματοποιείται μέσω του εργαλείου Apache Maven.

Οι βασικές εξαρτήσεις που χρησιμοποιούνται είναι:

- JUnit Jupiter (JUnit 5) για την υλοποίηση μονάδων ελέγχου (unit tests)
- SQLite JDBC για τη σύνδεση της εργασίας με βάση δεδομένων SQLite
Όλες οι εξαρτήσεις δηλώνονται στο αρχείο pom.xml και κατεβαίνουν αυτόματα κατά τη μεταγλώττιση.

Έλεγχοι Ορθότητας (Unit Testing):

Η εργασία περιλαμβάνει μονάδες ελέγχου οι οποίες έχουν υλοποιηθεί με τη χρήση του πλαισίου JUnit 5. Η εκτέλεση των tests πραγματοποιείται μέσω του Maven Surefire Plugin και μπορεί να γίνει είτε αυτόνομα είτε στο πλαίσιο της συνολικής διαδικασίας build.

Στατικός Έλεγχος Ποιότητας Κώδικα (Checkstyle):

Για τον έλεγχο της ποιότητας και της μορφοποίησης του κώδικα της εργασίας χρησιμοποιείται το εργαλείο Checkstyle, μέσω του maven-checkstyle-plugin, με κανόνες βασισμένους στο πρότυπο Google Java Style.

Στατική Ανάλυση Κώδικα (SpotBugs):

Η εργασία χρησιμοποιεί το εργαλείο SpotBugs για τη στατική ανάλυση του κώδικα και τον εντοπισμό πιθανών σφαλμάτων.
Τα αποτελέσματα της ανάλυσης εμφανίζονται ως προειδοποιήσεις και δεν διακόπτουν τη διαδικασία build.

Κάλυψη Κώδικα:

Στην παρούσα εργασία δεν έχει ενσωματωθεί εργαλείο μέτρησης κάλυψης κώδικα.